{"version":3,"sources":["webpack:///webpack/bootstrap 3c454b269c8f002eae68","webpack:///external \"express\"","webpack:///./src/hourly_consumption.json","webpack:///./src/index.js","webpack:///external \"fs\"","webpack:///./src/test.js"],"names":["app","express","port","fs","readFile","err","contents","console","log","test","listen","limit_hourly","consecutive_limit_hourly","only_consumption","hourly_consumption","map","x","consommation","exceed_true","only_true_index","indices","element","idx","indexOf","push","suite_w_duplicate","i","length","suite_wo_duplicate","finalArray","temporaryArray","keep_good_number_of_hours","result","get_objects_for_indexes","potential_leakage","forEach","get_potential_leakage","Promise","resolve","reject","then","value","catch","error"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3c454b269c8f002eae68","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","module.exports = [{\"heure\":1,\"jour\":1,\"consommation\":0},{\"heure\":2,\"jour\":1,\"consommation\":16},{\"heure\":3,\"jour\":1,\"consommation\":19},{\"heure\":4,\"jour\":1,\"consommation\":10},{\"heure\":5,\"jour\":1,\"consommation\":0},{\"heure\":6,\"jour\":1,\"consommation\":20},{\"heure\":7,\"jour\":1,\"consommation\":34},{\"heure\":8,\"jour\":1,\"consommation\":50},{\"heure\":9,\"jour\":1,\"consommation\":0},{\"heure\":10,\"jour\":1,\"consommation\":23},{\"heure\":11,\"jour\":1,\"consommation\":42},{\"heure\":12,\"jour\":1,\"consommation\":24},{\"heure\":13,\"jour\":1,\"consommation\":26},{\"heure\":14,\"jour\":1,\"consommation\":0},{\"heure\":15,\"jour\":1,\"consommation\":0},{\"heure\":16,\"jour\":1,\"consommation\":12},{\"heure\":17,\"jour\":1,\"consommation\":1},{\"heure\":18,\"jour\":1,\"consommation\":10},{\"heure\":19,\"jour\":1,\"consommation\":0},{\"heure\":20,\"jour\":1,\"consommation\":20},{\"heure\":21,\"jour\":1,\"consommation\":12},{\"heure\":22,\"jour\":1,\"consommation\":0},{\"heure\":23,\"jour\":1,\"consommation\":0},{\"heure\":24,\"jour\":1,\"consommation\":23},{\"heure\":1,\"jour\":1,\"consommation\":0},{\"heure\":2,\"jour\":2,\"consommation\":16},{\"heure\":3,\"jour\":2,\"consommation\":19},{\"heure\":4,\"jour\":2,\"consommation\":10},{\"heure\":5,\"jour\":2,\"consommation\":0},{\"heure\":6,\"jour\":2,\"consommation\":3},{\"heure\":7,\"jour\":2,\"consommation\":10},{\"heure\":8,\"jour\":2,\"consommation\":5},{\"heure\":9,\"jour\":2,\"consommation\":0},{\"heure\":10,\"jour\":2,\"consommation\":3},{\"heure\":11,\"jour\":2,\"consommation\":4},{\"heure\":12,\"jour\":2,\"consommation\":2},{\"heure\":13,\"jour\":2,\"consommation\":26},{\"heure\":14,\"jour\":2,\"consommation\":0},{\"heure\":15,\"jour\":2,\"consommation\":0},{\"heure\":16,\"jour\":2,\"consommation\":2},{\"heure\":17,\"jour\":2,\"consommation\":9},{\"heure\":18,\"jour\":2,\"consommation\":10},{\"heure\":19,\"jour\":2,\"consommation\":0},{\"heure\":20,\"jour\":2,\"consommation\":0},{\"heure\":21,\"jour\":2,\"consommation\":12},{\"heure\":22,\"jour\":2,\"consommation\":5},{\"heure\":23,\"jour\":2,\"consommation\":0},{\"heure\":24,\"jour\":2,\"consommation\":2}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/hourly_consumption.json\n// module id = 1\n// module chunks = 0","import express from 'express';\nimport hourly_consumption from './hourly_consumption.json'\nimport fs from 'fs'\nimport test from './test.js'\n\nconst app = express()\nconst port = 1258\n\nfs.readFile('src/hourly_consumption.json', 'utf8', function(err, contents) {\n    console.log(contents);\n});\n\ntest()\n\n\n\napp.listen(port, () => {\n  console.log(`express is running on port: ${port} ` )\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 4\n// module chunks = 0","import express from 'express';\nimport hourly_consumption from './hourly_consumption.json'\nconst test = () => {\n\n  const limit_hourly = 15 //enter the limit not to be exceeded\n  const consecutive_limit_hourly = 3//enter consecutive hourly\n\n\n  // consumption hour by hour\n  function only_consumption (hourly_consumption) {\n    return hourly_consumption.map(x => x.consommation)\n  }\n\n  // convert consumption to true or false (if it's true the limit has been exceeded)\n  function exceed_true (only_consumption) {\n    return only_consumption.map(x => x > limit_hourly)\n  }\n\n  // only get the indices equal to true\n  function only_true_index(exceed_true) {\n    let indices = [];\n    const element = true;\n\n    let idx = exceed_true.indexOf(element);\n    while (idx != -1) {\n      indices.push(idx);\n      idx = exceed_true.indexOf(element, idx + 1);\n    }\n    return indices\n  }\n\n\n\n  // we only recover the suites\n  function suite_w_duplicate(indices) {\n    let suite_w_duplicate = []\n    for( let i = 0; i < indices.length; i++) {\n      if(indices[i] === indices[i+1] -1) {\n        suite_w_duplicate.push(indices[i], indices[i+1])\n      }\n    }\n    return suite_w_duplicate\n  }\n\n  // Eliminate duplicate results\n\n  function suite_wo_duplicate(suite_w_duplicate) {\n    let suite_wo_duplicate = []\n    for(let i = 0; i < suite_w_duplicate.length; i++) {\n      if(suite_w_duplicate[i] !== suite_w_duplicate[i+1]) {\n        suite_wo_duplicate.push(suite_w_duplicate[i])\n      }\n    }\n    return suite_wo_duplicate\n\n  }\n\n\n  // split tab with suites\n  function finalArray(suite_wo_duplicate){\n    let finalArray = []\n    let temporaryArray = []\n\n    for (let i = 0; i < suite_wo_duplicate.length; ++i) {\n      if (i == 0) {\n        temporaryArray.push(suite_wo_duplicate[i])\n        continue\n      }\n      if(suite_wo_duplicate[i - 1] != (suite_wo_duplicate[i] - 1)) {\n        finalArray.push(temporaryArray)\n        temporaryArray = []\n      }\n      temporaryArray.push(suite_wo_duplicate[i])\n    }\n    finalArray.push(temporaryArray)\n\n    return finalArray\n  }\n\n  //eliminate the suites below the desired number of hours\n  function keep_good_number_of_hours(finalArray) {\n    let result = []\n    for(let i = 0; i <= finalArray.length-1; i++) {\n      if(finalArray[i].length >= consecutive_limit_hourly) {\n        result.push(finalArray[i])\n      }\n    }\n    return result\n  }\n\n\n  // index with object\n  function get_objects_for_indexes (result){\n    let potential_leakage = []\n    let temporaryArray = []\n    for(let i = 0; i < result.length; i++) {\n      result[i].forEach(x => temporaryArray.push(hourly_consumption[x]))\n      potential_leakage.push(temporaryArray)\n      temporaryArray = []\n    }\n    return potential_leakage\n  }\n\n\n  //Promises\n\n  const get_potential_leakage = new Promise((resolve, reject) => {\n    resolve(hourly_consumption)\n  })\n\n  get_potential_leakage\n  .then((value) => {\n    return only_consumption(value)\n  })\n  .then((value) => {\n    return exceed_true(value)\n  })\n  .then((value) => {\n    return only_true_index(value)\n  })\n  .then((value) => {\n    return suite_w_duplicate(value)\n  })\n  .then((value) => {\n    return suite_wo_duplicate(value)\n  })\n  .then((value) => {\n    return finalArray(value)\n  })\n  .then((value) => {\n    return keep_good_number_of_hours(value)\n  })\n  .then((value) => {\n    return get_objects_for_indexes(value)\n  })\n  .then((value) => {\n    console.log(value)\n  })\n\n  .catch((error) => {\n    console.error(error)\n  })\n\n\n}\n\nexport default test\n\n\n\n// WEBPACK FOOTER //\n// ./src/test.js"],"sourceRoot":""}